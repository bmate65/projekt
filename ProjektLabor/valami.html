<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weboldal</title>
    
    <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDw_i3_t0dhJ2RBL3SAd6RpSUWYHa1cSyE&libraries=drawing&callback=initMap">
</script>
    <script  src="distances.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body onload="initMap()">
    <header>
        <h1>Geo térkép</h1>
    </header>
    <nav>
       <!-- <a href="#home">Főoldal</a> -->
        <a href="#geography">Földrajz</a>
        <a href="#stars">Csillag</a>
    </nav>
   <!--
    <div class="content" id="home">
        <p><h2>Üdvözöllek a weboldalon</h2></p>
       
        <gmp-map center="47.85395050048828,17.284271240234375" zoom="14" map-id="DEMO_MAP_ID">
            <gmp-advanced-marker position="47.85395050048828,17.284271240234375" title="My location">
            </gmp-advanced-marker>
          </gmp-map>
    </div>
    -->



    <div class="content" id="geography">
        <h3>Földrajz Pontok közti távolság</h3>
        <!-- Ide helyezd el a földrajz tartalmat -->
        <!--
            <div id="inputPlace">
            <input type="text" placeholder="1. pont" id="pInput_1">
            <input type="text" placeholder="2. pont" id="pInput_2">
            <button id="setPlace" onclick="setPlace()">Beállít</button>
        </div>
    -->
  
        
            <!--The div elements for the map and message -->
            <div id="map"></div>
            <div id="msg"></div>

            <button onclick="calc()">Számítás</button>
            <button onclick="divideLineIntoKm()">test</button>
           
        
            <!--Load the API from the specified URL-->
            <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDw_i3_t0dhJ2RBL3SAd6RpSUWYHa1cSyE&callback=initMap">
            </script>
          
    

    
    
  
  
    



    <div class="content" id="stars">
        <h3>Csillag és égbolt</h3>
        <!-- Ide helyezd el a csillagokról szóló tartalmat -->
        <pre id="response"></pre>
        <form id="#myForm">
            <label for="astronomy">Válassz égitestet:</label>
            <select id="astronomy" name="astronomy">
              <option value="Sun">Nap</option>
              <option value="Moon">Hold</option>
              <option value="Mercury">Merkúr</option>
              <option value="Venus">Vénusz</option>
              <option value="Earth">Föld</option>
              <option value="Mars">Mars</option>
              <option value="Jupiter">Jupiter</option>
              <option value="Saturn">Szaturnusz</option>
              <option value="Uranus">Uránusz</option>
              <option value="Neptune">Neptunusz</option>
              <option value="Pluto">Plútó</option>
            </select>
        </form>
        <button id="FetchData">Lekérés</button><br>
        <canvas id="Astronomy1" width="400" height="400" style="border:1px solid grey"></canvas><br>
        <canvas id="Astronomy2" width="400" height="400" style="border:1px solid grey"></canvas>
        <script>
            //<![CDATA[
            const fetchDataButton = document.getElementById('FetchData');
            const responseText = document.getElementById('response');
            var object;

            fetchDataButton.addEventListener('click', () => {
                const applicationID = '3cb5b2ff-1fca-43bc-bc7a-a4a7fc9a356d';
                const applicationSecret = '1c354b208955906551e14cf592033cd2d3abc5c51c9462caadce0a221306fbfca88e208ba027b2dd87d4e2a1b9751f4b4c99b2cfea73f10f545c3cdd62201dac9317d463a39e7d13f0adea16df927981393f71495ee5acdde6747de007f8aa89ccdeb8d50d02be4f45be045fde26e700';

                const authString = btoa(`${applicationID}:${applicationSecret}`);
                var nameValue = document.getElementById("astronomy").value;
                fetch('https://api.astronomyapi.com/api/v2/bodies/positions/'+nameValue+'?longitude=-84.39733&latitude=33.775867&elevation=1&from_date=2023-10-30&to_date=2023-10-30&time=14%3A04%3A06', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Basic ${authString}`
                    },
                })
                .then(response => response.json())
                .then(data => {
                    responseText.textContent = JSON.stringify(data, null, 2);
                    object = JSON.parse(document.getElementById('response').textContent);
                    display();
                })
                .catch(error => {
                    responseText.textContent = 'Hiba: ' + error.message;
                });
            })
            function display() {
                clear();
                var drawAzimuth = object.data.table.rows[0].cells[0].position.horizontal.azimuth.degrees;
                drawAzimuth-=90;
                document.getElementById('response').innerHTML = "";
                var c = document.getElementById('Astronomy1');
                var ctx = c.getContext("2d");
                x1 = 200;
                y1 = 200;
                r =  150;
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x1 + r * Math.cos(Math.PI *drawAzimuth / 180.0), y1 + r * Math.sin(Math.PI * drawAzimuth / 180.0));
                ctx.stroke();
                ctx.font = "30px Arial";
                ctx.fillText("N", 190, 35);
                ctx.fillText("S", 190, 390);
                ctx.fillText("W", 10, 205);
                ctx.fillText("E", 360, 205);

                var drawAltitude = object.data.table.rows[0].cells[0].position.horizontal.altitude.degrees;
                var c = document.getElementById('Astronomy2');
                var ctx = c.getContext("2d");
                x1 = 20;
                y1 = 360;
                r = 350;
                x2 = x1 + r * Math.cos(Math.PI * -drawAltitude / 180.0);
                y2 = y1 + r * Math.sin(Math.PI * -drawAltitude / 180.0);
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(390, 360);
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.moveTo(x2, y2);
                
                ctx.arc(x2, y2, 10, 0, 2 * Math.PI);
                ctx.fillStyle = "#FF0000";
                ctx.moveTo(x1,y1);
                ctx.arc(x1, y1, 10, 0, 2 * Math.PI);
                ctx.fill();

                ctx.font = "20px Arial";
                ctx.fillText("Néző", 20, 390);
                ctx.font = "20px Arial";
                ctx.fillText("Égitest", x2 - 20, y2 - 20);
                ctx.stroke();
            }

            function clear() {
                var c1 = document.getElementById('Astronomy1').getContext("2d");
                c1.clearRect(0,0,400,400);
                var c2 = document.getElementById('Astronomy2').getContext("2d");
                c2.clearRect(0,0,400,400);
            }
            //]]>
        </script>
    </div>

</body>
</html>
 